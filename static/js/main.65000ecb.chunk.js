(this.webpackJsonprabbithole=this.webpackJsonprabbithole||[]).push([[0],{26:function(t,e,i){},33:function(t,e,i){"use strict";i.r(e);var n=i(0),a=i.n(n),s=i(14),c=i.n(s),r=(i(26),i(15)),o=i(16),h=i(21),l=i(20),d=i(17),u=i(2),j=i(1);function g(){return Object(j.jsx)(d.a,{children:Object(j.jsxs)("div",{children:[Object(j.jsx)("hr",{}),Object(j.jsx)(p,{})]})})}var p=Object(u.d)(function(t){Object(h.a)(i,t);var e=Object(l.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,t)).state={wikiData:{},firstPageTitle:"",isLoading:null},n}return Object(o.a)(i,[{key:"componentDidMount",value:function(){console.log(this.props.location.search),this.props.location.search?this.getMostRecentPage():this.startNewRabbithole()}},{key:"componentDidUpdate",value:function(t){this.props.location.search!==t.location.search&&this.getMostRecentPage()}},{key:"getMostRecentPage",value:function(){var t=new URLSearchParams(this.props.location.search).get("wiki");if(t){var e=t.split("|"),i=e[e.length-1];this.fetchPage(i)}}},{key:"replaceLinks",value:function(t){if(!t)return t;var e=new URLSearchParams(this.props.location.search).get("wiki");return t.replace(/\/wiki\//g,"/#/?wiki=".concat("".concat(e||this.state.firstPageTitle),"|"))}},{key:"fetchPage",value:function(t){var e=this;fetch("https://en.wikipedia.org/api/rest_v1/page/mobile-sections/".concat(t),{headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){console.log("resp",t),e.setState({wikiData:t})}))}},{key:"startNewRabbithole",value:function(){var t=this;this.setState({wikiData:{},firstPageTitle:"",isLoading:!0}),fetch("https://en.wikipedia.org/api/rest_v1/page/random/title",{headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(e){var i=e.items[0].title;console.log("TITLE FETCH resp",i),t.setState({firstPageTitle:i,isLoading:!1})}))}},{key:"render",value:function(){var t=this,e=[],i=new URLSearchParams(this.props.location.search).get("wiki");return i&&(e=i.replace(/_/g," ").split("|")),console.log(e),Object(j.jsxs)("div",{children:[this.state.isLoading&&Object(j.jsx)("div",{children:Object(j.jsx)("p",{children:"Finding a way in!!!!!!!!!!!"})}),!this.state.isLoading&&this.state.firstPageTitle&&!this.state.wikiData.lead&&Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:" THis is ur way in:"}),Object(j.jsx)("p",{children:Object(j.jsx)("strong",{children:this.state.firstPageTitle.replace(/_/g," ")})}),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:function(){return t.fetchPage(t.state.firstPageTitle)},children:"Start here"}),Object(j.jsx)("button",{onClick:function(){return t.startNewRabbithole()},children:"Show me another way in"})]})]}),!this.state.isLoading&&this.state.firstPageTitle&&this.state.wikiData.lead&&Object(j.jsxs)("div",{children:[Object(j.jsx)("a",{href:"/#/",onClick:function(){return t.startNewRabbithole()},children:"START OVER"}),Object(j.jsx)("ul",{children:e.map((function(t,e){return Object(j.jsx)("li",{children:t},e)}))}),this.state.wikiData.lead&&this.state.wikiData.lead.sections&&this.state.wikiData.lead.sections.map((function(e){return Object(j.jsx)("div",{dangerouslySetInnerHTML:{__html:t.replaceLinks(e.text)}},e.id)})),this.state.wikiData.remaining&&this.state.wikiData.remaining.sections&&this.state.wikiData.remaining.sections.map((function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:e.line}),Object(j.jsx)("div",{dangerouslySetInnerHTML:{__html:t.replaceLinks(e.text)}})]},e.id)}))]})]})}}]),i}(a.a.Component)),b=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,34)).then((function(e){var i=e.getCLS,n=e.getFID,a=e.getFCP,s=e.getLCP,c=e.getTTFB;i(t),n(t),a(t),s(t),c(t)}))};c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(g,{})}),document.getElementById("root")),b()}},[[33,1,2]]]);
//# sourceMappingURL=main.65000ecb.chunk.js.map